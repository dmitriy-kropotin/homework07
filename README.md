# homework07
Пришлось на работе для теста поднять аналог zoom - https://www.videomost.com/. Работает он на apache. Для анализа его логов и напишу скрипт.

-X IP адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта;
-Y запрашиваемых адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта;
-все ошибки c момента последнего запуска;
-список всех кодов возврата с указанием их кол-ва с момента последнего запуска. 
-защита от мультизапуска

Скрипт будет принимать два параметра запуска: 
  1ый - количество выводимых IP адресов с наибольшим количеством запросов. (по убыванию)
  2ой - количество выводимых URI с наибольшим количеством запросов. (по убыванию) 
  
Начну скрипт с проверки на количество и корректность параметров запуска.
<img width="482" alt="Снимок экрана 2022-04-09 в 14 48 46" src="https://user-images.githubusercontent.com/98701086/162572817-5a6fbefb-1341-44d1-869a-db9f8ef389c3.png">

Затем защита от мультизапуска
<img width="793" alt="Снимок экрана 2022-04-09 в 14 53 26" src="https://user-images.githubusercontent.com/98701086/162572994-06dcbda4-1bf0-4ec9-a6aa-b647d45e6d44.png">

Теперь надо найти номер строки, с которой будем анализировать файлы (либо первая строка, либо строка с момента прошлого запуска)
файл access-vm.log
<img width="1029" alt="Снимок экрана 2022-04-09 в 15 01 46" src="https://user-images.githubusercontent.com/98701086/162573323-21c63afe-cad9-4e63-9057-c91ab4849b07.png">

файл error-vm.log
<img width="1036" alt="Снимок экрана 2022-04-09 в 15 16 52" src="https://user-images.githubusercontent.com/98701086/162573812-de5701e6-a704-4de8-8c0b-aac94a6428b8.png">

Теперь посчитаю сколько строчек считать из файлов для анализа информации. И запишу с чего начать в следующий раз
<img width="731" alt="Снимок экрана 2022-04-09 в 15 10 24" src="https://user-images.githubusercontent.com/98701086/162573612-3814095d-7d00-46ec-b3af-4662bc0394e8.png">

Далее сам анализ информации и формирование результата
<img width="1252" alt="Снимок экрана 2022-04-09 в 15 15 41" src="https://user-images.githubusercontent.com/98701086/162573788-3ff044cd-7a5e-4730-aea4-4ffee614116f.png">

Удаляю файл блокировки и возвращаю результат выполнения
<img width="242" alt="Снимок экрана 2022-04-09 в 15 18 01" src="https://user-images.githubusercontent.com/98701086/162573842-32a1e2be-7cb2-4860-b8aa-a406c73bc365.png">



